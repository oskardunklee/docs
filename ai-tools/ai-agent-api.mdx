---
title: 'Lars API Reference'
description: 'API documentation for programmatic access to Lars'
---

# Lars API Reference

Integrate Lars capabilities into your applications using the Stanna API.

## Authentication

All API requests require authentication:

```http
X-API-Key: your-api-key
X-Workspace-Id: your-workspace-id
```

## Chat API

### Send Message

Send a message to Lars and receive a response with suggested actions.

```http
POST /api/ai-agent/chat
Content-Type: application/json
```

#### Request Body

```json
{
  "content": "What's the status of Acme Corp?",
  "conversationId": "optional-conversation-uuid"
}
```

#### Response

```json
{
  "success": true,
  "data": {
    "content": "Acme Corp is currently showing healthy metrics...",
    "conversationId": "conversation-uuid",
    "suggestedActions": [
      {
        "id": "action-uuid",
        "type": "CREATE_TASK",
        "title": "Follow up with Acme Corp",
        "description": "Schedule a check-in call",
        "status": "SUGGESTED",
        "riskLevel": "low",
        "params": {
          "clientId": "client-uuid",
          "title": "Check-in call",
          "dueAt": "2024-02-01T10:00:00Z"
        }
      }
    ],
    "clientReferences": [
      {
        "id": "client-uuid",
        "name": "Acme Corp",
        "domain": "acme.com"
      }
    ]
  }
}
```

## Actions API

### Execute Action

Execute a suggested action from Lars.

```http
POST /api/ai-agent/actions/{actionId}/execute
Content-Type: application/json
```

#### Request Body

```json
{
  "actionId": "action-uuid",
  "autoApprove": true
}
```

#### Response

```json
{
  "success": true,
  "data": {
    "success": true,
    "result": {
      "taskId": "task-uuid",
      "title": "Follow up with Acme Corp"
    },
    "metadata": {
      "actionType": "create_task",
      "clientId": "client-uuid"
    }
  }
}
```

## Error Responses

All endpoints return consistent error responses:

```json
{
  "success": false,
  "error": "Action not found or unauthorized",
  "code": "ACTION_NOT_FOUND",
  "timestamp": "2024-01-15T10:30:00Z"
}
```

### Common Error Codes

| Code | Status | Description |
|------|--------|-------------|
| `CONVERSATION_NOT_FOUND` | 404 | Conversation ID not found |
| `ACTION_NOT_FOUND` | 404 | Action ID not found |
| `INVALID_ACTION_STATUS` | 400 | Action cannot be executed |
| `CLIENT_NOT_FOUND` | 404 | Client ID not found |
| `RATE_LIMIT_EXCEEDED` | 429 | Too many requests |
| `VALIDATION_ERROR` | 400 | Request validation failed |

## Rate Limiting

API requests are rate-limited per workspace:
- **Chat API**: 60 requests per minute
- **Actions API**: 30 requests per minute

Rate limit headers are included in responses:
```http
X-RateLimit-Limit: 60
X-RateLimit-Remaining: 45
X-RateLimit-Reset: 1642248000
```

## Examples

### Node.js

```javascript
const axios = require('axios');

const client = axios.create({
  baseURL: 'https://api.gostanna.com',
  headers: {
    'X-API-Key': process.env.STANNA_API_KEY,
    'X-Workspace-Id': process.env.STANNA_WORKSPACE_ID
  }
});

// Send message to Lars
async function askLars(question) {
  const response = await client.post('/api/ai-agent/chat', {
    content: question
  });
  return response.data;
}

// Execute suggested action
async function executeAction(actionId) {
  const response = await client.post(
    `/api/ai-agent/actions/${actionId}/execute`,
    { autoApprove: true }
  );
  return response.data;
}

// Example usage
(async () => {
  const result = await askLars('Which clients are at risk?');
  console.log(result.data.content);

  if (result.data.suggestedActions.length > 0) {
    const action = result.data.suggestedActions[0];
    await executeAction(action.id);
  }
})();
```

### Python

```python
import requests
import os

class LarsClient:
    def __init__(self):
        self.base_url = 'https://api.gostanna.com'
        self.headers = {
            'X-API-Key': os.environ['STANNA_API_KEY'],
            'X-Workspace-Id': os.environ['STANNA_WORKSPACE_ID']
        }

    def ask(self, question):
        response = requests.post(
            f'{self.base_url}/api/ai-agent/chat',
            headers=self.headers,
            json={'content': question}
        )
        return response.json()

    def execute_action(self, action_id):
        response = requests.post(
            f'{self.base_url}/api/ai-agent/actions/{action_id}/execute',
            headers=self.headers,
            json={'autoApprove': True}
        )
        return response.json()

# Example usage
lars = LarsClient()
result = lars.ask('Which clients are at risk?')
print(result['data']['content'])

if result['data']['suggestedActions']:
    action = result['data']['suggestedActions'][0]
    lars.execute_action(action['id'])
```

## Next Steps

<CardGroup cols={2}>
  <Card title="API Reference" icon="code" href="/api-reference/introduction">
    Full API documentation
  </Card>
  <Card title="Authentication" icon="key" href="/api-reference/authentication">
    Learn about API authentication
  </Card>
</CardGroup>
